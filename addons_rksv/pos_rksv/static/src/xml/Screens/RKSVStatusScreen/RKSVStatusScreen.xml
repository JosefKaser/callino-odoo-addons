<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">

    <t t-name="RKSVStatusScreen" owl="1">
        <div class="modal-dialog">
            <div class="popup popup-rksv popup-rksv-fullscreen">
                <div class='pos-help'>
                    <p>
                        Dies ist das primäre Statusfenster. Es erscheint zum Setup oder wenn etwaige Probleme auftauchen.
                    </p>
                    <p>
                        Den allgemeinen Status können Sie rechts oben am RKSV Indikator erkennen.<br />
                        Um das System benutzen zu können müssen unterhalb alle 5 Boxen einen grünen Indikator zeigen.
                    </p>
                    <button class="close_pos" t-on-click="close_pos">Session beenden</button>
                </div>
                <div class="rksv-version">
                    <table width="100%">
                        <tr>
                            <td width="30%">Uhrzeit auf der PosBox:</td>
                            <td width="20%"><t t-esc="state.rksv_posbox_datetime" /></td>
                            <td width="30%">BMF Bibliothek Version:</td>
                            <td width="20%"><t t-esc="state.rksv_bmf_version" /></td>
                        </tr>
                        <tr>
                            <td width="30%">RKSV Bibliothek Version:</td>
                            <td width="20%"><t t-esc="state.rksv_rksv_version" /></td>
                            <td width="30%">RKSV PosBox Version:</td>
                            <td width="20%"><t t-esc="state.rksv_addon_version" /></td>
                        </tr>
                    </table>
                </div>
                <div class='posbox-status-container'>
                    <div class="posbox-status-indicator clearfix">
                        <div class="indicator" style="background: red;" t-if="state.posbox_status !== 'connected'" />
                        <div class="indicator" style="background: green;" t-if="state.posbox_status === 'connected'" />
                        <label>PosBox:</label>
                        <div class="indicator-message"><t t-esc="state.posbox_message"/></div>
                    </div>
                    <div class="rksv-status-indicator clearfix">
                        <div class="indicator" t-attf-style="background:{{ state.rksv_status_color }}"/>
                        <label>RKSV:</label>
                        <div class="indicator-message"><t t-out="state.rksv_status_message"/></div>
                        <button class="register_cashbox" t-if="state.button_register_cashbox" t-on-click="register_cashbox">-> Kasse mit PosBox verknüpfen</button>
                        <button t-if="state.cashbox_mode=='active'" t-on-click="activate_signature_failed">-> Signatur Ausfall Modus aktivieren(<t t-out="state.cashbox_mode"/>)</button>
                        <button class="register_startreceipt revalidate_startreceipt" t-if="state.button_register_startreceipt &amp;&amp; state.button_revalidate_startreceipt">-> Startbeleg prüfen</button>
                        <button class="register_startreceipt delete_startreceipt" t-if="state.button_register_startreceipt &amp;&amp; state.button_delete_startreceipt">-> Startbeleg löschen</button>
                        <button class="register_startreceipt export_crypt" t-if="state.button_register_startreceipt &amp;&amp; state.button_export_crypt">-> Crypt Export</button>
                        <button class="register_startreceipt start_receipt_set_valid" t-if="state.button_register_startreceipt &amp;&amp; state.button_start_receipt_set_valid">-> Gültigkeit des Startbelegs erzwingen</button>
                    </div>
                    <div class="cashbox-status-indicator clearfix">
                        <div class="indicator" t-attf-style="background:{{ state.cashbox_color }}"/>
                        <label>BMF (Kasse):</label>
                        <div class="indicator-message "><t t-esc="state.cashbox_message"/></div>
                        <button class="activate_cashbox" t-on-click="activate_cashbox" t-attf-style="display:{{ state.cashbox_activate_display }}">-> Kasse beim BMF anmelden</button>
                    </div>
                    <div class="monthproduct-status-indicator clearfix">
                        <div class="indicator" t-attf-style="background:{{ state.configuration_color }}"/>
                        <label>Konfiguration:</label>
                        <div class="indicator-message">RKSV Produkte</div>
                    </div>
                    <button t-on-click="close_rksv">Close</button>
                </div>
                <div class='posbox-status-container'>
                    <div class="signature-choose">
                        <p class="signature-provider-help">Bitte wählen Sie einen Signatur Provider aus der Liste. Der Button "Verwenden" setzt den aktiven Signatur Provider.</p>
                        <div class="provider-message-box"></div>
                        <div class="provider-container" t-if="state.signatures">
                            <t t-foreach="state.signatures" t-as="signature" t-key="signature.id">
                                <RKSVSignatureProvider
                                        signature="signature"
                                        valid_vat="state.valid_vat"
                                        t-on-click-client="clickClient" />
                            </t>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </t>

</templates>
